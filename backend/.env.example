# 眼鏡店顧客管理システム - バックエンド環境変数設定
# =================================================================
# 本ファイルをコピーして .env ファイルを作成し、適切な値を設定してください
# セキュリティ上の理由により、本番環境では必ず独自の値を設定すること

# =================================================================
# アプリケーション基本設定
# =================================================================
NODE_ENV=production
APP_NAME=眼鏡店顧客管理システム
PORT=3001
HOST=localhost

# フロントエンドURL設定（CORS用）
FRONTEND_URLS=http://localhost:3000,https://yourdomain.com

# =================================================================
# データベース設定
# =================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=glasses_store_db
DB_USER=glasses_user
DB_PASSWORD=<CHANGE_THIS_STRONG_PASSWORD>

# データベース接続プール設定
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=10000
DB_POOL_ACQUIRE_TIMEOUT=60000

# データベース暗号化キー（フィールドレベル暗号化用）
DB_ENCRYPTION_KEY=1cMyEb/njTMLHyYG9oxRPKx3QHLeDF1tg0fBGZNTm04=

# =================================================================
# JWT 認証設定
# =================================================================
# JWT アクセストークン用秘密鍵（本番では必ず変更すること）
JWT_SECRET=fee476d365a8121563f73089e9e0bfb8c63478336e82157c4e7e0b7cc692873d

# JWT リフレッシュトークン用秘密鍵（本番では必ず変更すること）
JWT_REFRESH_SECRET=b6c64c1ba17ddf7a4000b1dc7b1bc3afc3f31fc3370ea41089cc7ffa8155f2b6

# JWT トークン有効期限設定
JWT_ACCESS_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=30d

# =================================================================
# セッション管理設定
# =================================================================
SESSION_SECRET=76d5a8b0ee2106d6d9980b90a691eb182f72da72f9ca27ff483605911dc49b57
SESSION_NAME=glasses_store_session
SESSION_MAX_AGE=1800000

# Redis設定（セッション保存用）
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=<CHANGE_THIS_REDIS_PASSWORD>
REDIS_DB=0

# =================================================================
# パスワード暗号化設定
# =================================================================
BCRYPT_SALT_ROUNDS=12

# =================================================================
# ファイルアップロード・ストレージ設定
# =================================================================
# アップロード先ディレクトリ
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# 顧客画像保存設定
CUSTOMER_IMAGES_DIR=./uploads/customers
IMAGE_ALLOWED_TYPES=image/jpeg,image/png,image/gif

# =================================================================
# ログ設定
# =================================================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# セキュリティログ設定
SECURITY_LOG_ENABLED=true
SECURITY_LOG_FILE=./logs/security.log

# =================================================================
# セキュリティ設定
# =================================================================
# レート制限設定
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# 認証試行制限
LOGIN_MAX_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=1800000

# セッション設定
MAX_CONCURRENT_SESSIONS=3
SESSION_IDLE_TIMEOUT=1800000

# =================================================================
# メール通知設定
# =================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=<YOUR_EMAIL@gmail.com>
SMTP_PASSWORD=<YOUR_APP_PASSWORD>

# システム通知用メールアドレス
ADMIN_EMAIL=admin@yourglassesstore.com
NOTIFICATION_FROM_EMAIL=noreply@yourglassesstore.com

# =================================================================
# 外部システム連携設定
# =================================================================
# メガネット連携設定
MEGANE_NET_API_URL=<MEGANE_NET_API_URL>
MEGANE_NET_API_KEY=<MEGANE_NET_API_KEY>
MEGANE_NET_ENABLED=false

# CLIOS連携設定
CLIOS_API_URL=<CLIOS_API_URL>
CLIOS_API_KEY=<CLIOS_API_KEY>
CLIOS_ENABLED=false

# =================================================================
# 監視・メトリクス設定
# =================================================================
# アプリケーション監視
MONITORING_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health

# メトリクス収集設定
METRICS_ENABLED=true
METRICS_PORT=9090

# =================================================================
# バックアップ・アーカイブ設定
# =================================================================
# データベースバックアップ設定
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./backups

# 画像アーカイブ設定
IMAGE_ARCHIVE_ENABLED=true
IMAGE_ARCHIVE_AFTER_DAYS=365

# =================================================================
# SSL/TLS 証明書設定（本番環境用）
# =================================================================
SSL_ENABLED=false
SSL_CERT_PATH=./certs/server.crt
SSL_KEY_PATH=./certs/server.key
SSL_CA_PATH=./certs/ca.crt

# =================================================================
# デバッグ・開発設定
# =================================================================
DEBUG=false
VERBOSE_LOGGING=false

# データベース接続ログ出力
DB_LOGGING=false

# API レスポンス時間ログ出力
RESPONSE_TIME_LOGGING=true

# =================================================================
# 店舗固有設定
# =================================================================
# 本部店舗ID（管理用）
HQ_STORE_ID=00000000-0000-0000-0000-000000000000

# デフォルト店舗タイムゾーン
DEFAULT_TIMEZONE=Asia/Tokyo

# 営業時間設定（レジ精算制限用）
BUSINESS_HOURS_START=09:00
BUSINESS_HOURS_END=22:00

# =================================================================
# パフォーマンス設定
# =================================================================
# キャッシュ設定
CACHE_ENABLED=true
CACHE_TTL_PRODUCTS=3600
CACHE_TTL_USERS=1800
CACHE_TTL_STORES=7200

# 画像処理設定
IMAGE_RESIZE_ENABLED=true
IMAGE_THUMBNAIL_SIZE=200
IMAGE_MAX_DIMENSIONS=1920x1080